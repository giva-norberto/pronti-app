<aside class="sidebar" id="sidebar">
    <a href="index.html" class="sidebar-brand">
        <img src="https://firebasestorage.googleapis.com/v0/b/prontipro-96d26.appspot.com/o/logo-pronti-azul.png?alt=media&token=12345-abcde" alt="Logo Pronti">
    </a>
    <hr />
    <nav class="sidebar-links" id="sidebar-links">
        <a href="index.html" data-menu-id="inicio">
            <span><i class="fa-solid fa-house"></i></span> Início
        </a>
        <a href="dashboard.html" data-menu-id="dashboard">
            <span><i class="fa-solid fa-chart-pie"></i></span> Dashboard
        </a>
        <a href="agenda.html" data-menu-id="agenda">
            <span><i class="fa-solid fa-calendar-days"></i></span> Agenda
        </a>
        <a href="equipe.html" data-menu-id="equipe">
            <span><i class="fa-solid fa-users"></i></span> Equipe
        </a>
        <a href="servicos.html" data-menu-id="servicos">
            <span><i class="fa-solid fa-scissors"></i></span> Serviços
        </a>
        <a href="clientes.html" data-menu-id="clientes">
            <span><i class="fa-solid fa-user"></i></span> Clientes
        </a>
        <a href="perfil.html" data-menu-id="perfil">
            <span><i class="fa-solid fa-id-card"></i></span> Empresa
        </a>
        <a href="relatorios.html" data-menu-id="relatorios">
            <span><i class="fa-solid fa-chart-line"></i></span> Relatórios
        </a>
        <a href="admin-clientes.html" data-menu-id="administracao">
            <span><i class="fa-solid fa-shield"></i></span> Administração
        </a>
        <a href="permissoes.html" data-menu-id="permissoes">
            <span><i class="fa-solid fa-sliders"></i></span> Permissões
        </a>
    </nav>
    <div class="sidebar-footer">
        <button id="btn-logout" class="btn-logout">Sair</button>
    </div>
</aside>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

<style>
.sidebar {
  width: 250px;
  background-color: #4f46e5; /* Cor sólida baseada na sua imagem */
  min-height: 100vh;
  color: #fff;
  box-shadow: 2px 0 8px rgba(0,0,0,0.05);
  position: fixed;
  left: 0; top: 0; bottom: 0;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  padding: 16px 0; /* Ajuste no padding geral */
  transition: transform 0.3s ease;
  box-sizing: border-box;
}

/* ✅ ESTILO DO LOGO REVISADO */
.sidebar-brand {
  display: block;
  padding: 16px 24px;
  margin-bottom: 8px;
  text-align: center;
  text-decoration: none;
}

.sidebar-brand img {
    max-height: 50px; /* Controla a altura do logo */
    width: auto; /* Mantém a proporção da imagem */
    display: block;
    margin: 0 auto;
}

.sidebar hr {
  margin: 0 24px 16px 24px;
  border: none;
  border-top: 1px solid rgba(255, 255, 255, 0.15); /* Cor mais sutil */
}

/* ✅ ESTILO DOS LINKS REVISADO (baseado na sua imagem) */
.sidebar-links {
  display: flex;
  flex-direction: column;
  gap: 8px; /* Espaçamento menor */
  padding: 0 16px; /* Padding lateral */
  flex-grow: 1;
  overflow-y: auto;
}
.sidebar-links a {
  display: flex;
  align-items: center;
  gap: 16px;
  background-color: transparent; /* Fundo transparente por padrão */
  color: #c7d2fe; /* Cor do texto inativo */
  font-weight: 500;
  font-size: 1em;
  border-radius: 8px;
  transition: all 0.2s ease;
  padding: 12px 16px;
  text-decoration: none;
}
.sidebar-links a span {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  font-size: 1.1em;
}
.sidebar-links a.active,
.sidebar-links a:hover {
  background-color: #ffffff; /* Fundo branco ao passar o mouse ou ativo */
  color: #4338ca; /* Cor do texto mais escura para contraste */
  font-weight: 600;
}
.sidebar-footer {
  padding: 16px;
}
.btn-logout {
  background: transparent;
  color: #c7d2fe;
  border: 1px solid #c7d2fe; /* Borda sutil */
  padding: 12px 0;
  width: 100%;
  border-radius: 8px;
  font-weight: 600;
  font-size: 1em;
  cursor: pointer;
  transition: all 0.2s ease;
}
.btn-logout:hover {
  background: #ffffff;
  color: #ef4444; /* Cor de perigo ao passar o mouse */
  border-color: #ffffff;
}
@media (max-width: 900px) {
  .sidebar {
    transform: translateX(-100%);
    z-index: 2000;
  }
  .sidebar.open {
    transform: translateX(0);
  }
  body.sidebar-open {
    overflow: hidden;
  }
}
</style>

<script type="module">
// --- SEU JAVASCRIPT ORIGINAL (SEM ALTERAÇÕES) ---

import { auth } from "./firebase-config.js";
import { signOut } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js";

export function ativarMenuLateral() {
  const nomePaginaAtual = window.location.pathname.split('/').pop();
  document.querySelectorAll('.sidebar-links a').forEach(link => {
    link.classList.remove('active');
    const linkPagina = link.getAttribute('href').split('/').pop();
    if (linkPagina === nomePaginaAtual || (nomePaginaAtual === '' && linkPagina === 'index.html')) {
      link.classList.add('active');
    }
  });

  const btnLogout = document.getElementById("btn-logout");
  if (btnLogout) {
    const newBtnLogout = btnLogout.cloneNode(true);
    btnLogout.parentNode.replaceChild(newBtnLogout, btnLogout);

    newBtnLogout.addEventListener("click", async () => {
      try {
        await signOut(auth);
        localStorage.clear();
        sessionStorage.clear();
        window.location.href = "login.html";
      } catch (erro) {
        console.error("Erro ao tentar fazer logout:", erro);
        alert("Não foi possível sair. Tente novamente.\nErro: " + erro.message);
      }
    });
  }
}

ativarMenuLateral();
</script>
