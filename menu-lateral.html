<!-- MENU-LATERAL.HTML SIMPLIFICADO (FUNCIONÁRIO, DONO, ADMIN) -->
<aside class="sidebar" id="sidebar">
    <a href="index.html" class="sidebar-brand">Pronti</a>
    <hr />
    <nav class="sidebar-links" id="sidebar-links">
        <a href="index.html" id="link-inicio" class="menu-func">Início</a>
        <a href="agenda.html" id="link-agenda" class="menu-func">Agenda</a>
        <a href="equipe.html" id="link-equipe" class="menu-func">Equipe</a>

        <a href="servicos.html" id="link-servicos" class="menu-dono" style="display:none">Serviços</a>
        <a href="financeiro.html" id="link-financeiro" class="menu-dono" style="display:none">Financeiro</a>
        <a href="perfil.html" id="link-perfil" class="menu-dono" style="display:none">Perfil da Empresa</a>

        <a href="admin.html" id="admin-link" class="menu-admin" style="display:none">Administração</a>
    </nav>
    <div class="sidebar-footer">
        <button id="btn-logout" class="btn-logout">Sair</button>
    </div>
</aside>

<script type="module">
import { auth } from "./firebase-config.js";
import { signOut } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js";

document.addEventListener('DOMContentLoaded', () => {
    const userData = JSON.parse(localStorage.getItem('userData') || '{}');
    const role = userData.ehDono ? 'dono' : (userData.uid === "BX6Q7HrVMrcCBqe72r7K76EBPkX2" ? 'admin' : 'funcionario');

    // Mostrar menus conforme role
    if(role === 'funcionario') {
        document.querySelectorAll('.menu-func').forEach(e => e.style.display = '');
    } 
    if(role === 'dono') {
        document.querySelectorAll('.menu-func, .menu-dono').forEach(e => e.style.display = '');
    } 
    if(role === 'admin') {
        document.querySelectorAll('.menu-func, .menu-admin').forEach(e => e.style.display = '');
    }

    // Logout simples
    const btnLogout = document.getElementById('btn-logout');
    if(btnLogout){
        btnLogout.addEventListener('click', () => {
            signOut(auth).then(() => {
                localStorage.clear();
                window.location.href = 'login.html';
            });
        });
    }
});
</script>
