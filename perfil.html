<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meu Perfil - Pronti IA</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>

  <aside class="sidebar">
    <a href="index.html" class="sidebar-brand">Pronti</a>
    <div class="sidebar-links">
      <a href="dashboard.html">Dashboard</a>
      <a href="index.html">Home</a>
      <a href="servicos.html">Serviços</a>
      <a href="agenda.html">Agenda</a>
      <a href="clientes.html">Clientes</a>
      <a href="perfil.html" class="active">Meu Perfil</a>
      <a href="contato.html">Contato</a>
    </div>
  </aside>

  <main class="main-content">
    <h1>Meu Perfil Público</h1>
    <p>Estas são as informações que os seus clientes verão na sua página de agendamento.</p>

    <div class="form-card">
      <form id="form-perfil">
        <div class="form-group">
          <label for="nomeNegocio">Nome do Negócio</label>
          <input type="text" id="nomeNegocio" placeholder="Ex: Barbearia do João" required>
        </div>
        
        <!-- CAMPO DE LINK COM A PARTE PRINCIPAL "TRAVADA" -->
        <div class="form-group">
          <label for="slug">URL da sua Vitrine</label>
          <div style="display: flex; align-items: center; border: 1px solid #d1d5db; border-radius: 8px; padding-left: 12px; background-color: #f9fafb;">
            <span style="color: var(--cor-texto-leve); font-size: 0.9em; white-space: nowrap;">https://pronti-app.netlify.app/vitrine.html?slug=</span>
            <input type="text" id="slug" placeholder="barbearia-do-joao" required style="border: none; background: transparent; padding: 12px 10px; flex-grow: 1; outline: none; font-weight: 600; color: var(--cor-primaria);">
          </div>
          <small>Este campo será preenchido automaticamente a partir do Nome do Negócio.</small>
        </div>

        <!-- CAMPO PARA UPLOAD DO LOGÓTIPO -->
        <div class="form-group">
          <label for="logoNegocio">Logótipo do Negócio (Opcional)</label>
          <div style="display: flex; align-items: center; gap: 20px;">
              <img id="logo-preview" src="https://placehold.co/100x100/e0e7ff/6366f1?text=Logo" alt="Pré-visualização do logótipo" style="width: 100px; height: 100px; border-radius: 8px; object-fit: cover; border: 1px solid #d1d5db;">
              <div>
                <input type="file" id="logoNegocio" name="logoNegocio" accept="image/png, image/jpeg" style="display: none;">
                <button type="button" id="btn-upload-logo" class="btn-submit" style="background: var(--cor-texto-leve);">Escolher Ficheiro</button>
                <small style="display: block; margin-top: 10px;">Recomendado: imagem quadrada (ex: 200x200 pixels).</small>
              </div>
          </div>
        </div>

        <div class="form-group">
          <label for="descricao">Descrição Curta</label>
          <textarea id="descricao" rows="3" placeholder="Uma breve descrição do seu negócio."></textarea>
        </div>
        
        <button type="button" id="btn-copiar-link" class="btn-submit" style="width: 100%; margin-bottom: 15px; background: var(--cor-aviso);">Copiar Link da Vitrine</button>

        <button type="submit" class="btn-submit">Salvar Perfil</button>
      </form>
    </div>

  </main>

  <!-- Scripts -->
  <script src="firebase-config.js" type="module"></script>
  <script src="perfil.js" type="module"></script>
  
  <!-- Script para a interatividade do upload de logótipo -->
  <script>
    const btnUploadLogo = document.getElementById('btn-upload-logo');
    const logoInput = document.getElementById('logoNegocio');
    const logoPreview = document.getElementById('logo-preview');

    if(btnUploadLogo && logoInput && logoPreview) {
      // Ao clicar no botão, aciona o input de ficheiro escondido
      btnUploadLogo.addEventListener('click', () => {
        logoInput.click();
      });

      // Ao selecionar um ficheiro, atualiza a pré-visualização
      logoInput.addEventListener('change', () => {
        const file = logoInput.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            logoPreview.src = e.target.result;
          };
          reader.readAsDataURL(file);
        }
      });
    }
  </script>

</body>
</html>





